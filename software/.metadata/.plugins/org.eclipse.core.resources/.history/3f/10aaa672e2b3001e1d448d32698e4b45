
#include "system.h"
#include "altera_avalon_pio_regs.h"
#include "sys/alt_stdio.h"
#include "sys/unistd.h"
#include <time.h>

void attendre(int duree)/* fonction pour attendre une duree en secondes avant d'executer la prochaine instruction */
{
    int sec;

    time_t t;//l'information de temps
    struct tm * tt;

    t = time(NULL);
    tt = localtime(&t);/*tt contient la date via la structure tm, plus facile à manier, on met à jours les secondes*/
    sec = tt->tm_sec ;


    while(tt->tm_sec < (sec+duree))
    {
        t = time(NULL);
        tt = localtime(&t);
    }
}

int main(void) {
    for(int i=0; i<10;i++) {

        IOWR_ALTERA_AVALON_PIO_DATA(LED_OUT_BASE, 0x00);
        attendre(1);
        IOWR_ALTERA_AVALON_PIO_DATA(LED_OUT_BASE, 0x01);
        attendre(1);

    }

    return 0;
}
